<!DOCTYPE html>
<html>
  <body>
    <script>
      const params = new URLSearchParams(window.location.search);
      const authId = params.get('authId');
      const method = params.get('oauthRedirectMethod');
      const state = `{"authId":"${authId}","method":"${method}"}`;

      const getRedirectUri = () => {
        const idx = window.location.href.lastIndexOf('/');
        return `${window.location.href.slice(0, idx)}/auth_end.html`;
      };

      const queryObj = {
        state,
        client_id: 'client_id',
        response_type: 'code',
        access_type: 'offline',
        scope: 'email%20profile',
      };
      const query = Object.entries(queryObj)
        .map(([k, v]) => `&${k}=${v}`)
        .join('');

      document.write(
        `In real use cases, the app will redirect to OAuth signin page, e.g., https://accounts.google.com/o/oauth2/v2/auth?redirect_uri=${getRedirectUri()}${query}`,
      );
    </script>
  </body>
</html>
