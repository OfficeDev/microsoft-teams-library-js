# This does all the steps for cloning both app sdk and app host sdk repos and building them, then configuring the app host.
# Can be reused for any additional e2e tests and then paired with a node script with different parameters for which type of e2e test needs to run.

parameters:
  - name: 'appHostGitPath'
    default: none
    type: string
  - name: hostingEnvironmentType
    type: string
    default: 'electron'
    values:
      - 'electron'
      - 'standardWeb'
  - name: testPrefixPattern
    type: string
    default: '{[A-Z],[a-z],[0-9]}'
steps:
  - checkout: self
  - checkout: ${{ parameters.appHostGitPath }}
    persistCredentials: true

  - template: tools/yaml-templates/build-app-host.yml@self
    parameters:
      appHostGitPath: appHostGitPath

  - task: NodeTool@0
    inputs:
      versionSpec: '18.x'
    displayName: 'Install Node.js'
